#!/usr/bin/env sh

############################################################
REPODIR=$(pwd)
SETUPDIR=$REPODIR/.setup

# disable mouse accel
sudo cp $REPODIR/xorg/50-mouse-acceleration.conf /usr/share/X11/xorg.conf.d/

# setup bash env
wget -q -O $HOME/.config/dircolors https://raw.githubusercontent.com/trapd00r/LS_COLORS/master/LS_COLORS
cp -i $REPODIR/bash/.bashrc $HOME
cp -i $REPODIR/bash/aliases.sh $HOME/.config
cp -i $REPODIR/detox/* $HOME/.config

# create user bin folder
cp -r $REPODIR/bin $HOME

############################################################
VIMFILES=$HOME/.vim
SWP=$VIMFILES/swp
AUTO=$VIMFILES/autoload

# create necessary folders in ~/.vim
mkdir -p $SWP $AUTO

# get Vim-Plug
wget -q -O $AUTO/plug.vim https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim

cp -o $REPODIR/vim/vimrc $VIMFILES/vimrc
vim -c "PlugInstall"

############################################################
# setup newsbeuter
mkdir -p $HOME/.local/share/newsbeuter
cp -ri $REPODIR/newsbeuter $HOME/.config

############################################################
# create temporary setup folder
mkdir -p $SETUPDIR/hermit

# install Hermit font
cd $SETUPDIR/hermit
wget 'https://pcaro.es/d/otf-hermit-1.21.tar.gz'
tar xvzf *hermit*.tar.gz
sudo mkdir -p /usr/share/fonts/opentype/hermit
sudo cp $SETUPDIR/hermit/*.otf /usr/share/fonts/opentype/hermit

# copy dwm entry for lightdm
cp $REPODIR/dwm/dwm.desktop /usr/share/xsessions/

############################################################
# clone git repos
cd $SETUPDIR

git clone http://git.suckless.org/dmenu
git clone http://git.suckless.org/dwm
git clone http://git.suckless.org/slock
git clone http://git.suckless.org/st
git clone https://github.com/drkh5h/slstatus
git clone https://github.com/knopwob/dunst

############################################################
cp -ri $REPODIR/dmenu/* $SETUPDIR/dmenu
cp -ri $REPODIR/dunst/* $SETUPDIR/dunst
cp -ri $REPODIR/dwm/* $SETUPDIR/dwm
cp -ri $REPODIR/slock/* $SETUPDIR/slock
cp -ri $REPODIR/slstatus/* $SETUPDIR/slstatus
cp -ri $REPODIR/st/* $SETUPDIR/st
